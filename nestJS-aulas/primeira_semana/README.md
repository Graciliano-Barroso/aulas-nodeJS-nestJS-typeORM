- [ğŸ—‚ï¸ Plano de Estudo â€“ Nest.js (Semana 1)](#ï¸-plano-de-estudo--nestjs-semana-1)<!-- markdownlint-disable MD041 -->
- [ğŸ—‚ï¸ Plano de Estudo â€“ Nest.js (Semana 2)](#ï¸-plano-de-estudo--nestjs-semana-2)
- [ğŸ—‚ï¸ Plano de Estudo â€“ Nest.js (Semana 3)](#ï¸-plano-de-estudo--nestjs-semana-3)
- [ğŸ“¦ Estrutura do projeto ao final da 3Âª semana](#-estrutura-do-projeto-ao-final-da-3Âª-semana)
- [](#)<!-- markdownlint-disable MD042 -->
- [ğŸ“˜ Dia 1 â€“ IntroduÃ§Ã£o ao Nest.js](#-dia-1--introduÃ§Ã£o-ao-nestjs)
  - [âœ… O que Ã© o Nest.js?](#-o-que-Ã©-o-nestjs)
  - [âœ… Por que usar Nest.js?](#-por-que-usar-nestjs)
  - [âœ… Arquitetura e InjeÃ§Ã£o de DependÃªncia](#-arquitetura-e-injeÃ§Ã£o-de-dependÃªncia)
  - [ğŸ”§ Atividades PrÃ¡ticas](#-atividades-prÃ¡ticas)
  - [ğŸ§ª ExercÃ­cio Final](#-exercÃ­cio-final)
- [ğŸ“˜ **Dia 2 â€“ Controladores no Nest.js**](#-dia-2--controladores-no-nestjs)
  - [âœ… O que sÃ£o controladores?](#-o-que-sÃ£o-controladores)
  - [âœ… Decoradores principais](#-decoradores-principais)
  - [ğŸ”§ Atividades PrÃ¡ticas](#-atividades-prÃ¡ticas-1)
  - [ğŸš€ Testando no navegador ou Postman](#-testando-no-navegador-ou-postman)
  - [ğŸ§ª ExercÃ­cio Final](#-exercÃ­cio-final-1)
  - [âœ… O que vocÃª aprendeu hoje:](#-o-que-vocÃª-aprendeu-hoje)
- [ğŸ“˜ Dia 3 â€“ ServiÃ§os no Nest.js](#-dia-3--serviÃ§os-no-nestjs)
  - [âœ… O que sÃ£o serviÃ§os no Nest.js?](#-o-que-sÃ£o-serviÃ§os-no-nestjs)
  - [âœ… `@Injectable()` e InjeÃ§Ã£o de DependÃªncia](#-injectable-e-injeÃ§Ã£o-de-dependÃªncia)
  - [ğŸ”§ Atividades PrÃ¡ticas](#-atividades-prÃ¡ticas-2)
  - [ğŸ§ª ExercÃ­cio Final](#-exercÃ­cio-final-2)
  - [âœ… O que vocÃª aprendeu hoje:](#-o-que-vocÃª-aprendeu-hoje-1)
- [ğŸ“˜ Dia 4 â€“ DTOs e Tipagem no Nest.js](#-dia-4--dtos-e-tipagem-no-nestjs)
  - [âœ… O que Ã© um DTO (Data Transfer Object)?](#-o-que-Ã©-um-dto-data-transfer-object)
  - [âœ… Interfaces ou Classes para tipos](#-interfaces-ou-classes-para-tipos)
  - [âœ… ValidaÃ§Ã£o com TypeScript](#-validaÃ§Ã£o-com-typescript)
  - [ğŸ”§ Atividades PrÃ¡ticas](#-atividades-prÃ¡ticas-3)
- [ğŸ“˜ Dia 5 â€“ InjeÃ§Ã£o de DependÃªncia e Boas PrÃ¡ticas](#-dia-5--injeÃ§Ã£o-de-dependÃªncia-e-boas-prÃ¡ticas)
  - [âœ… InjeÃ§Ã£o de dependÃªncia com ``constructor()``](#-injeÃ§Ã£o-de-dependÃªncia-com-constructor)
  - [âœ… Boas prÃ¡ticas: separar DTOs, entidades, enums e mÃ³dulos](#-boas-prÃ¡ticas-separar-dtos-entidades-enums-e-mÃ³dulos)
  - [âœ… Status padrÃ£o ``ABERTA`` no mÃ©todo ``createTarefa()``](#-status-padrÃ£o-aberta-no-mÃ©todo-createtarefa)
  - [ğŸ”§ Atividades PrÃ¡ticas](#-atividades-prÃ¡ticas-4)
  - [ğŸ§ª ExercÃ­cio Final](#-exercÃ­cio-final-3)
  - [âœ… Como testar no Postman](#-como-testar-no-postman)
  - [âœ… Exemplo de resposta esperada no Postman:](#-exemplo-de-resposta-esperada-no-postman)
- [ğŸ“˜ Dia 6 â€“ MÃ³dulos no Nest.js](#-dia-6--mÃ³dulos-no-nestjs)
  - [âœ… O que sÃ£o mÃ³dulos no Nest.js?](#-o-que-sÃ£o-mÃ³dulos-no-nestjs)
  - [âœ… Por que dividir em mÃ³dulos?](#-por-que-dividir-em-mÃ³dulos)
  - [âœ… Exemplo de estrutura modular:](#-exemplo-de-estrutura-modular)
  - [ğŸ”§ Atividades PrÃ¡ticas](#-atividades-prÃ¡ticas-5)
  - [ğŸ§ª ExercÃ­cio Final](#-exercÃ­cio-final-4)
  - [âœ… O que vocÃª aprendeu hoje:](#-o-que-vocÃª-aprendeu-hoje-2)
- [ğŸ“˜ Dia 7 â€“ RevisÃ£o e PrÃ¡tica: Criando uma API de Tarefas](#-dia-7--revisÃ£o-e-prÃ¡tica-criando-uma-api-de-tarefas)
  - [ğŸ” Fluxo de funcionamento no Nest.js](#-fluxo-de-funcionamento-no-nestjs)
  - [ğŸ› ï¸ Objetivo da Aula](#ï¸-objetivo-da-aula)
  - [ğŸ§± **Requisitos da API**](#-requisitos-da-api)
  - [âœ… Endpoints:](#-endpoints)
  - [ğŸ”§ Passo a passo da implementaÃ§Ã£o](#-passo-a-passo-da-implementaÃ§Ã£o)
  - [ğŸ“¦ Estrutura final do projeto (sem banco)](#-estrutura-final-do-projeto-sem-banco)
  - [ğŸ«£ Antes do exercÃ­cio final vamos implementar a rota ``PATCH``](#-antes-do-exercÃ­cio-final-vamos-implementar-a-rota-patch)
  - [âœ… Rota ``PATCH /tarefas/:id/status``](#-rota-patch-tarefasidstatus)
  - [ğŸ§ª ExercÃ­cio Final](#-exercÃ­cio-final-5)
  - [âœ… O que vocÃª aprendeu hoje:](#-o-que-vocÃª-aprendeu-hoje-3)
- [ğŸ“˜ Dia 8 â€“ Pipes e ValidaÃ§Ã£o de Dados](#-dia-8--pipes-e-validaÃ§Ã£o-de-dados)
  - [âœ… O que sÃ£o Pipes no Nest.js?](#-o-que-sÃ£o-pipes-no-nestjs)
  - [âœ… ValidaÃ§Ã£o com ``class-validator`` + ``class-transformer``](#-validaÃ§Ã£o-com-class-validator--class-transformer)
  - [ğŸ”§ Atividades PrÃ¡ticas](#-atividades-prÃ¡ticas-6)
  - [âš ï¸ Se for usar a funÃ§Ã£o acima no mÃ©todo service seria bom remover os dois metodos abaixo relacionados ao status no serviÃ§o `TarefasService`](#ï¸-se-for-usar-a-funÃ§Ã£o-acima-no-mÃ©todo-service-seria-bom-remover-os-dois-metodos-abaixo-relacionados-ao-status-no-serviÃ§o-tarefasservice)
  - [âš ï¸ TambÃ©m remova o mÃ©todo  ``@Get('status/:status')`` e deixe tudo com o metodo que modificamos `@Get()`](#ï¸-tambÃ©m-remova-o-mÃ©todo--getstatusstatus-e-deixe-tudo-com-o-metodo-que-modificamos-get)
  - [ğŸ§ª ExercÃ­cio Final](#-exercÃ­cio-final-6)
  - [âœ… O que vocÃª aprendeu hoje:](#-o-que-vocÃª-aprendeu-hoje-4)

# ğŸ—‚ï¸ Plano de Estudo â€“ Nest.js (Semana 1)

> ğŸ¯ Objetivo: Entender a arquitetura do Nest.js, saber criar mÃ³dulos, controladores e serviÃ§os, e iniciar uma API RESTful organizada.

<!-- markdownlint-disable MD033 -->
<br/>
<hr/>
<br/>

ğŸ› ï¸ PrÃ©-requisitos antes de comeÃ§ar

- Node.js instalado

- Conhecimento bÃ¡sico de TypeScript

- Comandos bÃ¡sicos de terminal

- Editor (VS Code)

<br/>
<hr/>
<br/>

ğŸ“¦ InstalaÃ§Ã£o do Nest.js CLI

```bash
npm i -g @nestjs/cli
nest new projeto-tarefas
```

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 1 â€“ IntroduÃ§Ã£o ao Nest.js

ğŸ“š ConteÃºdo â€“ Dia 1

- O que Ã© Nest.js e por que usÃ¡-lo?

- Arquitetura baseada em mÃ³dulos e injeÃ§Ã£o de dependÃªncia

- Como funciona o padrÃ£o MVC no Nest

- Primeira execuÃ§Ã£o de um projeto

ğŸ”§ Atividades - Dia 1

- Instalar o Nest CLI e criar projeto com `nest new`

- Explorar os arquivos gerados (`main.ts`, `app.module.ts`, etc.)

- Rodar o servidor: `npm run start:dev`

ğŸ§ª ExercÃ­cio - Dia 1

Adicionar um `console.log()` no `main.ts` para verificar o ambiente.

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 2 â€“ Controladores (Controllers)

ğŸ“š ConteÃºdo - Dia 2

- O que sÃ£o controladores

- Decoradores como `@Controller()` e `@Get()`

- Rotas e parÃ¢metros de rota

ğŸ”§ Atividades - Dia 2

- Criar um controlador `tarefas.controller.ts`:

```bash
nest g controller tarefas
```

- Criar mÃ©todos `GET /tarefas`, `GET /tarefas/:id`

ğŸ§ª ExercÃ­cio - Dia 2

Adicionar mais uma rota: `GET /tarefas/status/:status`

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 3 â€“ ServiÃ§os (Services)

ğŸ“š ConteÃºdo - Dia 3

- O que sÃ£o serviÃ§os

- `@Injectable()`: como funciona a injeÃ§Ã£o de dependÃªncia

- Separando a lÃ³gica de negÃ³cio

ğŸ”§ Atividades - Dia 3

Criar serviÃ§o `tarefas.service.ts`:

```bash
nest g service tarefas
```

- Mover lÃ³gica de listagem de tarefas para o serviÃ§o

ğŸ§ª ExercÃ­cio - Dia 3

Criar um mÃ©todo `getTarefaPorId(id: string)` no serviÃ§o e usÃ¡-lo no controller

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 4 â€“ DTOs e Tipagem

ğŸ“š ConteÃºdo - Dia 4

- Criando interfaces ou classes para tipos

- O que Ã© DTO (Data Transfer Object)

- ValidaÃ§Ã£o bÃ¡sica de dados com TypeScript

ğŸ”§ Atividades - Dia 4

- Criar DTO `create-tarefa.dto.ts` com `titulo` e `descricao`

- Criar tipo `Tarefa` com status enum

ğŸ§ª ExercÃ­cio - Dia 4

ğŸ§ª ExercÃ­cio:
Adicionar lÃ³gica para `POST /tarefas` com DTO

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 5 â€“ InjeÃ§Ã£o de dependÃªncia e boas prÃ¡ticas

ğŸ“š ConteÃºdo - Dia 5

- InjeÃ§Ã£o de serviÃ§os com o `constructor()`

- Boa prÃ¡tica: separar DTOs, entidades, mÃ³dulos

- Criar status enum para tarefas: `ABERTA`, `EM_ANDAMENTO`, `FINALIZADA`

ğŸ”§ Atividades - Dia 5

- Atualizar o mÃ©todo `createTarefa()` para usar status padrÃ£o `ABERTA`

ğŸ§ª ExercÃ­cio - Dia 5

- Criar um mÃ©todo `filtrarTarefasPorStatus(status: string)`

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 6 â€“ MÃ³dulos

ğŸ“š ConteÃºdo - Dia 6

- Entendendo o que sÃ£o mÃ³dulos

- Dividindo responsabilidades por domÃ­nio

- ReutilizaÃ§Ã£o de mÃ³dulos em aplicaÃ§Ãµes grandes

ğŸ”§ Atividades - Dia 6

- Criar novo mÃ³dulo para tarefas (caso nÃ£o tenha sido criado junto com controller):

```bash
nest g module tarefas
```

- Garantir que o mÃ³dulo estÃ¡ importando controller e serviÃ§o corretamente

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 7 â€“ RevisÃ£o e prÃ¡tica

ğŸ“š ConteÃºdo

- Revisar: controller â†’ chama â†’ service â†’ retorna resposta

- Criar mini projeto de API de tarefas (em memÃ³ria, sem banco de dados)

ğŸ§ª ExercÃ­cio final da semana

Criar uma API de tarefas com os seguintes endpoints:

- `GET /tarefas`: listar todas

- `GET /tarefas/:id`: listar por ID

- `POST /tarefas`: criar tarefa

- `DELETE /tarefas/:id`: remover tarefa

- `PATCH /tarefas/:id/status`: atualizar status

<br/>
<hr/>
<br/>

ğŸ“¦ Pastas organizadas no final da semana

```lua
src/
â”œâ”€â”€ tarefas/
â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â””â”€â”€ create-tarefa.dto.ts
â”‚   â”œâ”€â”€ tarefas.controller.ts
â”‚   â”œâ”€â”€ tarefas.service.ts
â”‚   â”œâ”€â”€ tarefas.module.ts
â”œâ”€â”€ main.ts
â””â”€â”€ app.module.ts
```

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio da 2Âª semana ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

<!-- markdownlint-disable MD025 -->
# ğŸ—‚ï¸ Plano de Estudo â€“ Nest.js (Semana 2)

> ğŸ¯ Objetivo: Aprimorar sua API com validaÃ§Ãµes, autenticaÃ§Ã£o bÃ¡sica, tratamento de erros e preparar para integraÃ§Ã£o com banco de dados (TypeORM).

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 8 â€“ Pipes e validaÃ§Ã£o de dados

ğŸ“š ConteÃºdo

- O que sÃ£o Pipes no Nest.js

- Usando `@Body()` com DTOs

- Usando `class-validator` e `class-transformer`

ğŸ”§ Atividades

- Instalar os pacotes:

```bash
npm install class-validator class-transformer
```

- Criar validador no `create-tarefa.dto.ts`:

```typescript
import { IsString, IsEnum } from "class-validator";

export class CreateTarefaDto {
  @IsNotEmpty()
  titulo: string;

  @IsNotEmpty()
  descricao: string;
}
```

ğŸ§ª ExercÃ­cio

- Criar um `FilterDto` para buscar tarefas por `status` e `termo` com validaÃ§Ã£o usando `@IsOptional()`.

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 9 â€“ Pipes customizados

ğŸ“š ConteÃºdo

- Criar um pipe de validaÃ§Ã£o de status

- Usar `@Param()` com pipes

ğŸ”§ Atividades

- Criar `TarefaStatusValidationPipe`

- Validar se `status` recebido Ã© vÃ¡lido (enum)

ğŸ§ª ExercÃ­cio

- Adicionar pipe no endpoint `PATCH /tarefas/:id/status`

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 10 â€“ Exception Filters (tratamento de erros)

ğŸ“š ConteÃºdo

- O que sÃ£o filtros de exceÃ§Ã£o

- Usando HttpException e NotFoundException

- Criar filtro global customizado (opcional)

ğŸ”§ Atividades

- Criar exceÃ§Ã£o personalizada se uma tarefa nÃ£o for encontrada.

```typescript
throw new NotFoundException(`Tarefa com ID "${id}" nÃ£o encontrada`);
```

ğŸ§ª ExercÃ­cio

Adicionar exceÃ§Ãµes personalizadas para os mÃ©todos `GET`, `DELETE` e `UPDATE`.

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 11 â€“ Middleware

ğŸ“š ConteÃºdo

- O que Ã© middleware no Nest.js

- DiferenÃ§a entre middleware, guards e interceptadores

- Aplicar middleware globalmente ou por rota

ğŸ”§ Atividades

- Criar middleware de log:

```bash
nest g middleware logger
```

- Aplicar nas rotas de tarefas

ğŸ§ª ExercÃ­cio

- Adicionar timestamp e rota acessada no log.

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 12 â€“ Guards (autenticaÃ§Ã£o bÃ¡sica)

ğŸ“š ConteÃºdo

- O que sÃ£o guards

- Criar um guard simples (ex: autenticaÃ§Ã£o via token hardcoded)

- Usar `@UseGuards()` no controller

ğŸ”§ Atividades

- Criar `AuthGuard` que verifica se `authorization` tem token `meutoken123`.

ğŸ§ª ExercÃ­cio

- Proteger rota de criaÃ§Ã£o de tarefas com guard.

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 13 â€“ ConfiguraÃ§Ã£o com .env e instalaÃ§Ã£o de TypeORM

ğŸ“š ConteÃºdo

- Uso do pacote `@nestjs/config`

- Criar `.env` para credenciais de banco

- Instalar pacotes do TypeORM

```bash
npm install --save @nestjs/typeorm typeorm pg
```

ğŸ”§ Atividades

- Criar `.env`:

```env
DB_HOST=localhost
DB_PORT=5432
DB_USERNAME=usuario
DB_PASSWORD=senha
DB_NAME=nest_tarefas
```

- Configurar `TypeOrmModule.forRootAsync()` em `app.module.ts`

ğŸ§ª ExercÃ­cio

- Simular a conexÃ£o (sem entidades ainda), garantir que app inicia com sucesso.

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 14 â€“ Preparar para uso do banco com TypeORM

ğŸ“š ConteÃºdo

- O que sÃ£o entidades

- IntroduÃ§Ã£o a decorators do TypeORM

- DiferenÃ§a entre entidades e DTOs

- VisÃ£o geral de `repository`, `migration`, `relation`

ğŸ”§ Atividades

- Criar a primeira entidade `TarefaEntity` com os campos `id`, `titulo`, `descricao`, `status`, `dataCriacao`.

```ts
@Entity()
export class Tarefa {
  @PrimaryGeneratedColumn("uuid")
  id: string;

  @Column()
  titulo: string;

  @Column()
  descricao: string;

  @Column()
  status: TarefaStatus;

  @CreateDateColumn()
  dataCriacao: Date;
}
```

<br/>
<hr/>
<br/>

ğŸ§  Ao final da semana, vocÃª terÃ¡

âœ… API validando dados
âœ… Erros tratados corretamente
âœ… Middleware e autenticaÃ§Ã£o bÃ¡sica funcionando
âœ… Projeto pronto para usar TypeORM com banco de dados real

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio da 3Âª semana ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ—‚ï¸ Plano de Estudo â€“ Nest.js (Semana 3)

> ğŸ¯ Objetivo: PersistÃªncia com banco de dados usando TypeORM, criaÃ§Ã£o de entidades, relacionamento, autenticaÃ§Ã£o com JWT e finalizaÃ§Ã£o de um projeto completo.

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 15 â€“ Integrar TypeORM com Nest.js

ğŸ“š ConteÃºdo

- Relembrar `.env` com variÃ¡veis de conexÃ£o

- Importar `TypeOrmModule` no `AppModule`

- Conectar ao PostgreSQL (ou outro)

ğŸ”§ Atividades

- Configurar `TypeOrmModule.forRoot()` com dados do `.env`

- Testar conexÃ£o

- Criar entidade `TarefaEntity`

```ts
@Entity("tarefas")
export class TarefaEntity {
  @PrimaryGeneratedColumn("uuid")
  id: string;

  @Column()
  titulo: string;

  @Column()
  descricao: string;

  @Column()
  status: TarefaStatus;
}
```

ğŸ§ª ExercÃ­cio

- Criar repositÃ³rio de tarefas e salvar tarefa no banco.

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 16 â€“ CRUD com banco de dados

ğŸ“š ConteÃºdo

- Criar `TarefaRepository`

- Uso do `InjectRepository`

- MÃ©todos: `save`, `find`, `findOne`, `delete`

ğŸ”§ Atividades:
Refatorar `tarefas.service.ts` para usar o banco de dados em vez de array

ğŸ§ª ExercÃ­cio:
Implementar os mÃ©todos: `findAll`, `findById`, `create`, `delete`, `updateStatus`

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 17 â€“ AutenticaÃ§Ã£o com JWT (parte 1)

ğŸ“š ConteÃºdo

- Criar mÃ³dulo de usuÃ¡rios

- Criar entidade `UsuarioEntity`

- Instalar pacotes:

```bash
npm install @nestjs/jwt @nestjs/passport passport passport-jwt bcryptjs
```

ğŸ”§ Atividades

- Criar `UsuarioModule`, `UsuarioService`, `UsuarioEntity`

- Registrar e salvar novo usuÃ¡rio com senha criptografada (bcrypt)

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 18 â€“ AutenticaÃ§Ã£o com JWT (parte 2)

ğŸ“š ConteÃºdo

- Criar `AuthModule` e serviÃ§o de autenticaÃ§Ã£o

- Validar login, gerar token JWT

- Criar Guard com Passport para proteger rotas

ğŸ”§ Atividades

- Criar rota `POST /auth/login`

Implementar `JwtStrategy` para validar token

ğŸ§ª ExercÃ­cio

- Proteger rotas de tarefas com `@UseGuards(AuthGuard())`

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 19 â€“ Relacionamentos com TypeORM

ğŸ“š ConteÃºdo

- Criar relacionamento `User â†’ Tarefa` (1:N)

- Usar `@ManyToOne()` e `@OneToMany()`

ğŸ”§ Atividades

- Alterar entidade `TarefaEntity` para ter um campo `usuario`

```ts
@ManyToOne(() => UsuarioEntity, usuario => usuario.tarefas, { eager: false })
usuario: UsuarioEntity;
```

- Ajustar criaÃ§Ã£o de tarefas para registrar o usuÃ¡rio dono da tarefa

ğŸ§ª ExercÃ­cio

- Buscar tarefas de um usuÃ¡rio logado (usando o token JWT)

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 20 â€“ Filtros, DTOs avanÃ§ados e refatoraÃ§Ãµes

ğŸ“š ConteÃºdo

- Criar DTO para login e registro

- DTOs para atualizar tarefas com validaÃ§Ãµes

- Filtros com parÃ¢metros opcionais

ğŸ”§ Atividades

- Refatorar rotas para usar DTOs consistentes

- Criar filtros por status, tÃ­tulo e usuÃ¡rio

ğŸ§ª ExercÃ­cio

- Adicionar `GET /tarefas?status=ABERTA&busca=texto` usando query params

<br/>
<hr/>
<br/>

ğŸ—“ï¸ Dia 21 â€“ Finalizando o projeto

ğŸ“š ConteÃºdo

- Testar todas as rotas

- Documentar API com Swagger

- Preparar deploy local (opcional)

ğŸ”§ Atividades

- Instalar Swagger:

```bash
npm install --save @nestjs/swagger swagger-ui-express
```

- Documentar rotas com decorators `@ApiTags`, `@ApiBody`, `@ApiResponse`, etc.

# ğŸ“¦ Estrutura do projeto ao final da 3Âª semana

```cpp
src/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”œâ”€â”€ jwt.strategy.ts
â”‚   â””â”€â”€ dtos/
â”œâ”€â”€ usuario/
â”‚   â”œâ”€â”€ usuario.entity.ts
â”‚   â”œâ”€â”€ usuario.service.ts
â”œâ”€â”€ tarefas/
â”‚   â”œâ”€â”€ tarefa.entity.ts
â”‚   â”œâ”€â”€ tarefas.controller.ts
â”‚   â”œâ”€â”€ tarefas.service.ts
â”œâ”€â”€ common/
â”‚   â””â”€â”€ pipes/
â”œâ”€â”€ main.ts
â”œâ”€â”€ app.module.ts
```

<br/>
<hr/>
<br/>

âœ… Ao final da 3Âª semana, vocÃª terÃ¡

- API com banco de dados real (PostgreSQL ou outro)

- CRUD completo persistente com autenticaÃ§Ã£o

- ValidaÃ§Ã£o com DTOs e Pipes

- SeguranÃ§a com JWT e Guards

- Relacionamentos com usuÃ¡rios e entidades protegidas

- DocumentaÃ§Ã£o com Swagger

#

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 1Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 1 â€“ IntroduÃ§Ã£o ao Nest.js

ğŸ“š ConteÃºdo

## âœ… O que Ã© o Nest.js?

- Nest.js Ã© um framework Node.js para a construÃ§Ã£o de aplicaÃ§Ãµes escalÃ¡veis, eficientes e modularizadas, baseado em TypeScript.

- Ele utiliza princÃ­pios de ProgramaÃ§Ã£o Orientada a Objetos, ProgramaÃ§Ã£o Funcional e Arquitetura Modular.

## âœ… Por que usar Nest.js?

- CÃ³digo limpo e estruturado (sem caos de arquivos soltos)

- Baseado em mÃ³dulos: cada domÃ­nio da aplicaÃ§Ã£o tem seu prÃ³prio mÃ³dulo

- CompatÃ­vel com bibliotecas do Express e Fastify

- Suporte nativo a TypeORM, JWT, Swagger, WebSockets e muito mais

- FÃ¡cil escalabilidade para projetos grandes

## âœ… Arquitetura e InjeÃ§Ã£o de DependÃªncia

- Usa arquitetura modular: divide funcionalidades em mÃ³dulos (ex: TarefasModule, UsuarioModule)

- Usa InjeÃ§Ã£o de DependÃªncia (DI) para desacoplar classes: os serviÃ§os sÃ£o injetados nos controladores via construtor

- Baseado no padrÃ£o MVC: Controller â†’ Service â†’ Repository (quando usa banco)

<br/>
<hr/>
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

1ï¸âƒ£ Instalar o Nest CLI

```bash
npm install -g @nestjs/cli
```

2ï¸âƒ£ Criar um novo projeto Nest

```bash
nest new projeto-tarefas
```

VocÃª serÃ¡ perguntado qual gerenciador de pacotes deseja usar. Pode escolher `npm` ou `yarn`.

3ï¸âƒ£ Estrutura de arquivos gerada

ApÃ³s a criaÃ§Ã£o, observe os principais arquivos:

```bash
projeto-tarefas/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.controller.ts        // Controlador padrÃ£o
â”‚   â”œâ”€â”€ app.service.ts           // ServiÃ§o padrÃ£o
â”‚   â”œâ”€â”€ app.module.ts            // MÃ³dulo raiz
â”‚   â””â”€â”€ main.ts                  // Ponto de entrada da aplicaÃ§Ã£o
â”œâ”€â”€ test/                        // Testes gerados automaticamente
â”œâ”€â”€ package.json                 // DependÃªncias e scripts
â”œâ”€â”€ tsconfig.json                // ConfiguraÃ§Ã£o TypeScript
```

4ï¸âƒ£ Rodar o servidor de desenvolvimento

Acesse a pasta do projeto:

```bash
cd projeto-tarefas
npm run start:dev
```

VocÃª verÃ¡ algo como:

```bash
[Nest] 3456  - 23/06/2025, 14:00:00   [NestFactory] Starting Nest application...
[Nest] 3456  - 23/06/2025, 14:00:01   [RoutesResolver] AppController {/}: +1 route
[Nest] 3456  - 23/06/2025, 14:00:01   [NestApplication] Nest application successfully started on port 3000
```

Acesse <http://localhost:3000> e verÃ¡ a mensagem:

```bash
Hello World!
```

<br/>
<hr/>
<br/>

## ğŸ§ª ExercÃ­cio Final

Abra o arquivo `src/main.ts` e adicione um `console.log()` para verificar se o ambiente estÃ¡ em desenvolvimento:

```ts
async function bootstrap() {
  console.log("Ambiente atual:", process.env.NODE_ENV || "desenvolvimento");

  const app = await NestFactory.create(AppModule);
  await app.listen(3000);
}
bootstrap();
```

Execute novamente com:

```bash
npm run start:dev
```

Verifique no terminal a saÃ­da do console.

<br/>
<hr/>
<br/>

âœ… O que vocÃª aprendeu hoje:
âœ” O que Ã© o Nest.js e por que ele Ã© utilizado
âœ” Como criar um projeto usando Nest CLI
âœ” Como a arquitetura modular funciona
âœ” Como rodar e explorar a estrutura inicial do projeto
âœ” Como modificar o ponto de entrada e testar algo no console

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 2Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ **Dia 2 â€“ Controladores no Nest.js**

ğŸ“š **ConteÃºdo TeÃ³rico**

## âœ… O que sÃ£o controladores?

No Nest.js, os **Controllers** (controladores) sÃ£o responsÃ¡veis por lidar com as **requisiÃ§Ãµes** HTTP. Eles recebem os dados da requisiÃ§Ã£o, **chamam os serviÃ§os** responsÃ¡veis pela lÃ³gica de negÃ³cio e devolvem uma resposta ao cliente.

<br/>
<hr/>
<br/>

## âœ… Decoradores principais

Nest usa decoradores para definir rotas e comportamento:

| Decorador                                  | DescriÃ§Ã£o                                    |
| ------------------------------------------ | -------------------------------------------- |
| `@Controller('rota')`                      | Define o prefixo da rota do controller       |
| `@Get()`, `@Post()`, `@Put()`, `@Delete()` | Define o tipo de requisiÃ§Ã£o HTTP             |
| `@Param()`                                 | Captura parÃ¢metros da URL                    |
| `@Query()`                                 | Captura parÃ¢metros de query string           |
| `@Body()`                                  | Captura o corpo da requisiÃ§Ã£o (em POST, PUT) |

<br/>
<hr/>
<br/>

<!-- markdownlint-disable MD024 -->
## ğŸ”§ Atividades PrÃ¡ticas

1ï¸âƒ£ Criar um controller chamado `tarefas`

No terminal, dentro da pasta do projeto:

```bash
nest g controller tarefas
```

> Isso criarÃ¡ um novo controller em `src/tarefas/tarefas.controller.ts`

<br/>
<hr/>
<br/>

2ï¸âƒ£ Editar o controller para adicionar rotas `GET`

Abra `src/tarefas/tarefas.controller.ts` e adicione os seguintes mÃ©todos:

```ts
import { Controller, Get, Param } from "@nestjs/common";

@Controller("tarefas") // prefixo: todas as rotas comeÃ§am com /tarefas
export class TarefasController {
  private tarefas = [
    { id: 1, titulo: "Estudar Nest.js", status: "ABERTA" },
    { id: 2, titulo: "Fazer exercÃ­cios", status: "EM_ANDAMENTO" },
  ];

  // GET /tarefas
  @Get()
  getTodasTarefas() {
    return this.tarefas;
  }

  // GET /tarefas/:id
  @Get(":id")
  getTarefaPorId(@Param("id") id: string) {
    return this.tarefas.find((tarefa) => tarefa.id === parseInt(id));
  }

  // GET /tarefas/status/:status
  @Get("status/:status")
  getTarefasPorStatus(@Param("status") status: string) {
    return this.tarefas.filter(
      (tarefa) => tarefa.status === status.toUpperCase()
    );
  }
}
```

<br/>
<hr/>
<br/>

## ğŸš€ Testando no navegador ou Postman

- `GET http://localhost:3000/tarefas` â†’ retorna todas as tarefas

- `GET http://localhost:3000/tarefas/1` â†’ retorna tarefa com ID 1

- `GET http://localhost:3000/tarefas/status/aberta` â†’ retorna todas com status ABERTA

<br/>
<hr/>
<br/>

## ğŸ§ª ExercÃ­cio Final

Adicione uma nova tarefa ao array e teste as rotas. Exemplo:

```ts
{ id: 3, titulo: 'Revisar conteÃºdo do Dia 2', status: 'FINALIZADA' }
```

Depois teste:

- `GET /tarefas/3`

- `GET /tarefas/status/finalizada`

<br/>
<hr/>
<br/>

<!-- markdownlint-disable MD026 -->
## âœ… O que vocÃª aprendeu hoje:

âœ” Criar um controller com o CLI (`nest g controller`)
âœ” Usar os decoradores `@Controller()`, `@Get()`, `@Param()`
âœ” Criar rotas com parÃ¢metros dinÃ¢micos
âœ” Retornar dados estÃ¡ticos para testes iniciais
âœ” Preparar o terreno para conectar com serviÃ§os (Dia 3)`

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 3Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 3 â€“ ServiÃ§os no Nest.js

ğŸ“š ConteÃºdo TeÃ³rico

## âœ… O que sÃ£o serviÃ§os no Nest.js?

- Services (ou serviÃ§os) sÃ£o responsÃ¡veis por conter a lÃ³gica de negÃ³cio da aplicaÃ§Ã£o.

- Enquanto os controllers lidam com as requisiÃ§Ãµes e respostas HTTP, os serviÃ§os executam o que realmente precisa ser feito.

> âœ¨ Eles promovem a separaÃ§Ã£o de responsabilidades (princÃ­pio SOLID: Single Responsibility).

<br/>
<hr/>
<br/>

## âœ… `@Injectable()` e InjeÃ§Ã£o de DependÃªncia

- O decorator `@Injectable()` diz ao Nest.js que aquela classe pode ser injetada em outras classes via o construtor.

- Isso permite que o Nest.js gere automaticamente instÃ¢ncias dos serviÃ§os e controle o ciclo de vida deles.

<br/>
<hr/>
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

1ï¸âƒ£ Criar o serviÃ§o de tarefas

No terminal:

```bash
nest g service tarefas
```

> Isso vai gerar o arquivo `tarefas.service.ts` dentro da pasta `src/tarefas`.`

<br/>
<hr/>
<br/>

2ï¸âƒ£ Mover a lÃ³gica para o serviÃ§o

Abra `src/tarefas/tarefas.service.ts` e adicione a seguinte implementaÃ§Ã£o:

```ts
import { Injectable } from "@nestjs/common";

@Injectable()
export class TarefasService {
  private tarefas = [
    { id: 1, titulo: "Estudar Nest.js", status: "ABERTA" },
    { id: 2, titulo: "Fazer exercÃ­cios", status: "EM_ANDAMENTO" },
    { id: 3, titulo: "Revisar conteÃºdo do Dia 2", status: "FINALIZADA" },
  ];

  getTodasTarefas() {
    return this.tarefas;
  }

  getTarefaPorId(id: number) {
    return this.tarefas.find((tarefa) => tarefa.id === id);
  }

  getTarefasPorStatus(status: string) {
    return this.tarefas.filter((t) => t.status === status.toUpperCase());
  }
}
```

<br/>
<hr/>
<br/>

3ï¸âƒ£ Injetar o serviÃ§o no controller

Abra `src/tarefas/tarefas.controller.ts` e modifique para usar o serviÃ§o:

```ts
import { Controller, Get, Param } from "@nestjs/common";
import { TarefasService } from "./tarefas.service";

@Controller("tarefas")
export class TarefasController {
  constructor(private readonly tarefasService: TarefasService) {}

  @Get()
  getTodasTarefas() {
    return this.tarefasService.getTodasTarefas();
  }

  @Get(":id")
  getTarefaPorId(@Param("id") id: string) {
    return this.tarefasService.getTarefaPorId(parseInt(id));
  }

  @Get("status/:status")
  getTarefasPorStatus(@Param("status") status: string) {
    return this.tarefasService.getTarefasPorStatus(status);
  }
}
```

<br/>
<hr/>
<br/>

âš ï¸ AtenÃ§Ã£o
Caso vocÃª veja erro como `Nest can't resolve dependencies of the TarefasController`, certifique-se de que o `TarefasService` estÃ¡ declarado no mÃ³dulo `TarefasModule` (ou no `AppModule`, se ainda nÃ£o criou um mÃ³dulo prÃ³prio):

```ts
@Module({
  controllers: [TarefasController],
  providers: [TarefasService],
})
export class TarefasModule {}
```

âš ï¸ AtenÃ§Ã£o
NÃ£o foi criado um modo prÃ³prio para declarar o mÃ³dulo `TarefasModule` por isso vocÃª precisa declarar `TarefasService` no `AppModule`.

Vai ficar assim:

```ts
@Module({
  controllers: [AppController, TarefasController],
  providers: [AppService, TarefasService],
})
export class AppModule {}
```

## ğŸ§ª ExercÃ­cio Final

Crie o mÃ©todo `getTarefaPorId(id: string)` no serviÃ§o (jÃ¡ feito acima) e:

1. Refatore o controller para usar esse mÃ©todo.

2. Teste a rota `GET /tarefas/:id` com valores existentes e inexistentes.

3. Tente retornar uma mensagem personalizada se nÃ£o encontrar nenhuma tarefa (opcional para o prÃ³ximo dia, quando trataremos erros).

<br/>
<hr/>
<br/>

## âœ… O que vocÃª aprendeu hoje:

âœ” O que Ã© um serviÃ§o no Nest.js
âœ” Como criar um serviÃ§o com `@Injectable()`
âœ” Como aplicar injeÃ§Ã£o de dependÃªncia no controller
âœ” Como separar a lÃ³gica de negÃ³cio do controller
âœ” Como preparar seu projeto para escalar de forma organizada

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 4Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 4 â€“ DTOs e Tipagem no Nest.js

ğŸ“š ConteÃºdo TeÃ³rico

## âœ… O que Ã© um DTO (Data Transfer Object)?

- DTO Ã© uma classe que define a forma dos dados que sÃ£o enviados ou recebidos pela sua API.

- Serve como contrato entre quem envia e quem recebe dados.

- Com Nest.js (e TypeScript), os DTOs sÃ£o usados junto com validaÃ§Ãµes e decorators.

<br/>
<hr/>
<br/>

## âœ… Interfaces ou Classes para tipos

- VocÃª pode definir tipos com `interface` ou `class`.

- Nest.js recomenda o uso de classes, pois elas funcionam com bibliotecas de validaÃ§Ã£o como `class-validator`.

<br/>
<hr/>
<br/>

## âœ… ValidaÃ§Ã£o com TypeScript

- Com TypeScript, Ã© possÃ­vel garantir a estrutura dos objetos e melhorar a inteligÃªncia do editor.

- Podemos usar tipos enumerados (enum) para restringir valores possÃ­veis, como status de uma tarefa.

<br/>
<hr/>
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

1ï¸âƒ£ Criar um DTO de criaÃ§Ã£o de tarefa

Crie o arquivo:

ğŸ“ `src/tarefas/dto/create-tarefa.dto.ts`

```ts
export class CreateTarefaDto {
  titulo: string;
  descricao: string;
}
```

> Essa classe representa os dados esperados na criaÃ§Ã£o de uma tarefa.

<br/>
<hr/>
<br/>

2ï¸âƒ£ Criar um enum de status de tarefa

Crie o arquivo:

ğŸ“ `src/tarefas/tarefa-status.enum.ts`

```ts
export enum TarefaStatus {
  ABERTA = "ABERTA",
  EM_ANDAMENTO = "EM_ANDAMENTO",
  FINALIZADA = "FINALIZADA",
}
```

> Esse enum define os Ãºnicos status vÃ¡lidos para uma tarefa.

<br/>
<hr/>
<br/>

3ï¸âƒ£ Criar o tipo `Tarefa`

VocÃª pode criar uma interface ou classe (vamos usar interface por enquanto):

ğŸ“ `src/tarefas/tarefa.model.ts`

```ts
import { TarefaStatus } from "./tarefa-status.enum";

export interface Tarefa {
  id: number;
  titulo: string;
  descricao: string;
  status: TarefaStatus;
}
```

<br/>
<hr/>
<br/>

4ï¸âƒ£ Atualizar o serviÃ§o para usar os tipos

Abra o arquivo `tarefas.service.ts` e modifique para usar a nova interface:

```ts
import { Injectable } from "@nestjs/common";
import { Tarefa } from "./tarefa.model";
import { TarefaStatus } from "./tarefa-status.enum";
import { CreateTarefaDto } from "./dto/create-tarefa.dto";

@Injectable()
export class TarefasService {
  private tarefas: Tarefa[] = [];

  getTodasTarefas(): Tarefa[] {
    return this.tarefas;
  }

  getTarefaPorId(id: number): Tarefa {
    return this.tarefas.find((t) => t.id === id);
  }

  getTarefasPorStatus(status: string): Tarefa[] {
    return this.tarefas.filter((t) => t.status === status.toUpperCase());
  }

  createTarefa(dto: CreateTarefaDto): Tarefa {
    const { titulo, descricao } = dto;

    const tarefa: Tarefa = {
      id: Date.now(), // simulando ID Ãºnico
      titulo,
      descricao,
      status: TarefaStatus.ABERTA,
    };

    this.tarefas.push(tarefa);
    return tarefa;
  }
}
```

<br/>
<hr/>
<br/>

5ï¸âƒ£ Atualizar o controller para receber dados via `POST`

Abra `tarefas.controller.ts` e adicione:

```ts
import { Body, Controller, Get, Param, Post } from "@nestjs/common";
import { TarefasService } from "./tarefas.service";
import { CreateTarefaDto } from "./dto/create-tarefa.dto";
import { Tarefa } from "./tarefa.model";

@Controller("tarefas")
export class TarefasController {
  constructor(private readonly tarefasService: TarefasService) {}

  @Get()
  getTodasTarefas(): Tarefa[] {
    return this.tarefasService.getTodasTarefas();
  }

  @Get(":id")
  getTarefaPorId(@Param("id") id: string): Tarefa {
    return this.tarefasService.getTarefaPorId(parseInt(id));
  }

  @Get("status/:status")
  getTarefasPorStatus(@Param("status") status: string): Tarefa[] {
    return this.tarefasService.getTarefasPorStatus(status);
  }

  @Post()
  createTarefa(@Body() createTarefaDto: CreateTarefaDto): Tarefa {
    return this.tarefasService.createTarefa(createTarefaDto);
  }
}
```

<br/>
<hr/>
<br/>

ğŸ§ª ExercÃ­cio Final

1. FaÃ§a um `POST` com JSON no Postman para o endpoint:

```bash
POST http://localhost:3000/tarefas
```

```json
{
  "titulo": "Estudar DTOs",
  "descricao": "Aprender como usar DTOs no Nest.js"
}
```

<!-- markdownlint-disable MD029 -->
2. Depois acesse:

- `GET /tarefas` para ver a tarefa criada

- `GET /tarefas/ID` para ver a tarefa por ID

- `GET /tarefas/status/ABERTA` para filtrar por status

<br/>
<hr/>
<br/>

âœ… O que vocÃª aprendeu hoje:

âœ” O que Ã© um DTO e por que usÃ¡-lo
âœ” Como definir tipos com classes, interfaces e enums
âœ” Como aplicar DTOs no fluxo de criaÃ§Ã£o de tarefas
âœ” Como usar `@Body()` para receber dados no Nest.js
âœ” Como preparar seu cÃ³digo para aplicar validaÃ§Ãµes reais no prÃ³ximo dia

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 5Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 5 â€“ InjeÃ§Ã£o de DependÃªncia e Boas PrÃ¡ticas

ğŸ“š ConteÃºdo TeÃ³rico

## âœ… InjeÃ§Ã£o de dependÃªncia com ``constructor()``

- No Nest.js, a injeÃ§Ã£o de dependÃªncia acontece automaticamente via o construtor das classes.

- Ao declarar um parÃ¢metro no construtor com o tipo de uma classe decorada com ``@Injectable()``, o Nest resolve e fornece a instÃ¢ncia para vocÃª.

Exemplo:

```ts
constructor(private readonly tarefasService: TarefasService) {}
```

> Isso injeta o serviÃ§o ``TarefasService`` no controller.

<br/>
<hr />
<br/>

## âœ… Boas prÃ¡ticas: separar DTOs, entidades, enums e mÃ³dulos

Organizar o projeto em camadas bem definidas Ã© essencial:

```cpp
src/
â”œâ”€â”€ tarefas/
â”‚   â”œâ”€â”€ dto/                     â†’ Dados de entrada
â”‚   â”œâ”€â”€ enums/                   â†’ Enums (status, roles, etc.)
â”‚   â”œâ”€â”€ tarefas.controller.ts    â†’ Lida com requisiÃ§Ãµes
â”‚   â”œâ”€â”€ tarefas.service.ts       â†’ LÃ³gica de negÃ³cio
â”‚   â”œâ”€â”€ tarefa.model.ts          â†’ Tipo de tarefa
â”‚   â””â”€â”€ tarefa-status.enum.ts    â†’ Status enum
```

> Isso ajuda a manter o projeto limpo e escalÃ¡vel.

<br/>
<hr />
<br/>

## âœ… Status padrÃ£o ``ABERTA`` no mÃ©todo ``createTarefa()``

Sempre que uma nova tarefa for criada, ela deve comeÃ§ar com o status ``ABERTA``, sem depender do usuÃ¡rio enviar esse valor.

<br/>
<hr />
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

1ï¸âƒ£ Revisar e mover o enum para pasta organizada

Crie a pasta ``src/tarefas/enums/`` e mova o arquivo ``tarefa-status.enum.ts`` para lÃ¡:

```ts
// src/tarefas/enums/tarefa-status.enum.ts
export enum TarefaStatus {
  ABERTA = 'ABERTA',
  EM_ANDAMENTO = 'EM_ANDAMENTO',
  FINALIZADA = 'FINALIZADA',
}
```

Atualize os imports onde for necessÃ¡rio.

<br/>
<hr />
<br/>

2ï¸âƒ£ Atualizar o mÃ©todo ``createTarefa()`` no serviÃ§o

Garanta que o status da tarefa criada seja sempre ``ABERTA``, mesmo que nÃ£o venha do DTO:

```ts
// src/tarefas/tarefas.service.ts
import { TarefaStatus } from './enums/tarefa-status.enum';

createTarefa(dto: CreateTarefaDto): Tarefa {
  const { titulo, descricao } = dto;

  const tarefa: Tarefa = {
    id: Date.now(),
    titulo,
    descricao,
    status: TarefaStatus.ABERTA, // valor padrÃ£o
  };

  this.tarefas.push(tarefa);
  return tarefa;
}
```

<br/>
<hr />
<br/>

## ğŸ§ª ExercÃ­cio Final

Criar um mÃ©todo ``filtrarTarefasPorStatus(status: string)``

No ``tarefas.service.ts``:

```ts
filtrarTarefasPorStatus(status: string): Tarefa[] {
  return this.tarefas.filter(
    (tarefa) => tarefa.status === status.toUpperCase(),
  );
}
```

No ``tarefas.controller.ts``, atualize o mÃ©todo correspondente:

```ts
@Get('status/:status')
getTarefasPorStatus(@Param('status') status: string): Tarefa[] {
  return this.tarefasService.filtrarTarefasPorStatus(status);
}
```

<br/>
<hr />
<br/>

## âœ… Como testar no Postman

1. Certifique-se de que o servidor estÃ¡ rodando:

```bash
npm run start:dev
```

2. FaÃ§a uma requisiÃ§Ã£o GET no Postman para:

```bash
GET http://localhost:3000/tarefas/status/ABERTA
```

Ou teste com:

- ``/tarefas/status/em_andamento``

- ``/tarefas/status/finalizada``

> Dica: como o mÃ©todo faz ``.toUpperCase()``, vocÃª pode enviar o status em minÃºsculas, maiÃºsculas ou misto â€“ tudo serÃ¡ tratado corretamente.

## âœ… Exemplo de resposta esperada no Postman:

```bash
[
  {
    "id": 123456789,
    "titulo": "Estudar Nest.js",
    "descricao": "Aprender como funciona o framework",
    "status": "ABERTA"
  }
]
```

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 6Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 6 â€“ MÃ³dulos no Nest.js

ğŸ“š ConteÃºdo TeÃ³rico

## âœ… O que sÃ£o mÃ³dulos no Nest.js?

- MÃ³dulos sÃ£o a base da organizaÃ§Ã£o de qualquer aplicaÃ§Ã£o Nest.js.

- Cada mÃ³dulo agrupa controllers, services, providers, e outros recursos que compartilham um mesmo propÃ³sito.

- A estrutura modular permite dividir a aplicaÃ§Ã£o em domÃ­nios independentes, facilitando a manutenÃ§Ã£o e escalabilidade.

> O Nest sempre comeÃ§a com um ``AppModule`` (mÃ³dulo raiz), e vocÃª pode criar quantos mÃ³dulos precisar.

<br/>
<hr />
<br/>

## âœ… Por que dividir em mÃ³dulos?

- Isolamento de responsabilidade: cada mÃ³dulo trata de uma parte especÃ­fica da aplicaÃ§Ã£o.

- ReutilizaÃ§Ã£o: mÃ³dulos podem ser reutilizados em outras partes ou projetos.

- Escalabilidade: facilita adicionar novos domÃ­nios e funcionalidades.

<br/>
<hr />
<br/>

## âœ… Exemplo de estrutura modular:

```cpp
src/
â”œâ”€â”€ app.module.ts
â”œâ”€â”€ tarefas/
â”‚   â”œâ”€â”€ tarefas.module.ts      â†’ MÃ³dulo de tarefas
â”‚   â”œâ”€â”€ tarefas.controller.ts  â†’ Controller de tarefas
â”‚   â”œâ”€â”€ tarefas.service.ts     â†’ ServiÃ§o de tarefas
â”‚   â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ enums/
â”‚   â”œâ”€â”€ tarefa.model.ts
```

<br/>
<hr />
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

1ï¸âƒ£ Criar mÃ³dulo de tarefas (caso nÃ£o tenha feito ainda)

No terminal com o caminho em ``C:\meus_projetos\aulas-nodeJS-nestJS-typeORM\nestJS-aulas\primeira_semana\projeto-tarefas\src>``:

```bash
nest g module tarefas
```

> Isso criarÃ¡ o arquivo ``src/tarefas/tarefas.module.ts``

<br/>
<hr />
<br/>

2ï¸âƒ£ Garantir que o mÃ³dulo estÃ¡ completo

Abra o arquivo ``tarefas.module.ts`` e verifique se estÃ¡ importando corretamente o controller e o service:

```ts
import { Module } from '@nestjs/common';
import { TarefasController } from './tarefas.controller';
import { TarefasService } from './tarefas.service';

@Module({
  controllers: [TarefasController],
  providers: [TarefasService],
})
export class TarefasModule {}
```

<br/>
<hr />
<br/>

3ï¸âƒ£ Registrar o mÃ³dulo no mÃ³dulo raiz (``AppModule``)

Abra ``src/app.module.ts`` e adicione o mÃ³dulo de tarefas no array ``imports``:

```ts
import { Module } from '@nestjs/common';
import { TarefasModule } from './tarefas/tarefas.module';

@Module({
  imports: [TarefasModule],
})
export class AppModule {}
```

<br/>
<hr />
<br/>

## ğŸ§ª ExercÃ­cio Final

1. Pare e reinicie o servidor (``Ctrl+C`` e ``npm run start:dev``) para aplicar as alteraÃ§Ãµes.

2. Confirme se as rotas de tarefas continuam funcionando normalmente:

- ``GET /tarefas``

- ``GET /tarefas/1``

- ``POST /tarefas``

3. Teste remover o ``TarefasService`` de dentro do ``AppModule`` (se ainda estiver lÃ¡) para garantir que a responsabilidade estÃ¡ centralizada no mÃ³dulo de tarefas.

<br/>
<hr />
<br/>

## âœ… O que vocÃª aprendeu hoje:

âœ” O que sÃ£o e para que servem mÃ³dulos no Nest.js
âœ” Como organizar o projeto por domÃ­nio funcional usando mÃ³dulos
âœ” Como criar e registrar mÃ³dulos customizados
âœ” Como garantir o isolamento de responsabilidade de cada parte da aplicaÃ§Ã£o

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 7Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 7 â€“ RevisÃ£o e PrÃ¡tica: Criando uma API de Tarefas

ğŸ“š RevisÃ£o de Conceitos

## ğŸ” Fluxo de funcionamento no Nest.js

1. **Controller**: recebe a requisiÃ§Ã£o HTTP (GET, POST, etc.)

2. **Service**: contÃ©m a lÃ³gica de negÃ³cio

3. **DTOs** e **Enums**: definem estrutura e regras dos dados

4. **Resposta**: volta para o controller e Ã© enviada para o cliente

<br/>
<hr />
<br/>

## ğŸ› ï¸ Objetivo da Aula

Criar um mini projeto Nest.js de uma API de tarefas, com armazenamento em memÃ³ria e rotas completas para manipular as tarefas.

Sem banco de dados por enquanto â€“ o foco Ã© praticar controllers, services, DTOs, mÃ³dulos, enums e boas prÃ¡ticas.

<br/>
<hr />
<br/>

## ğŸ§± **Requisitos da API**

## âœ… Endpoints:

| MÃ©todo | Rota                  | AÃ§Ã£o                         |
| ------ | --------------------- | ---------------------------- |
| GET    | `/tarefas`            | Listar todas as tarefas      |
| GET    | `/tarefas/:id`        | Obter uma tarefa pelo ID     |
| POST   | `/tarefas`            | Criar uma nova tarefa        |
| DELETE | `/tarefas/:id`        | Remover uma tarefa           |
| PATCH  | `/tarefas/:id/status` | Atualizar o status da tarefa |

<br/>
<hr />
<br/>

## ğŸ”§ Passo a passo da implementaÃ§Ã£o

1ï¸âƒ£ Criar a estrutura do mÃ³dulo de tarefas

Caso ainda nÃ£o tenha criado:

```bash
nest g module tarefas
nest g controller tarefas
nest g service tarefas
```

<br/>
<hr />
<br/>

2ï¸âƒ£ Criar ``TarefaStatus`` enum

ğŸ“ ``src/tarefas/enums/tarefa-status.enum.ts``

```ts
export enum TarefaStatus {
  ABERTA = 'ABERTA',
  EM_ANDAMENTO = 'EM_ANDAMENTO',
  FINALIZADA = 'FINALIZADA',
}
```

<br/>
<hr />
<br/>

3ï¸âƒ£ Criar a interface ``Tarefa``

ğŸ“ ``src/tarefas/tarefa.model.ts``

```ts
import { TarefaStatus } from './enums/tarefa-status.enum';

export interface Tarefa {
  id: number;
  titulo: string;
  descricao: string;
  status: TarefaStatus;
}
```

<br/>
<hr />
<br/>

4ï¸âƒ£ Criar DTO de criaÃ§Ã£o de tarefa

ğŸ“ ``src/tarefas/dto/create-tarefa.dto.ts``

```ts
export class CreateTarefaDto {
  titulo: string;
  descricao: string;
}
```

<br/>
<hr />
<br/>

5ï¸âƒ£ Criar o ``TarefasService``

ğŸ“ ``src/tarefas/tarefas.service.ts``

```ts
import { Injectable } from '@nestjs/common';
import { Tarefa } from './tarefa.model';
import { CreateTarefaDto } from './dto/create-tarefa.dto';
import { TarefaStatus } from './enums/tarefa-status.enum';

@Injectable()
export class TarefasService {
  private tarefas: Tarefa[] = [];

  getTodas(): Tarefa[] {
    return this.tarefas;
  }

  getPorId(id: number): Tarefa {
    return this.tarefas.find(t => t.id === id);
  }

  criar(dto: CreateTarefaDto): Tarefa {
    const tarefa: Tarefa = {
      id: Date.now(), // gera ID Ãºnico com timestamp
      titulo: dto.titulo,
      descricao: dto.descricao,
      status: TarefaStatus.ABERTA,
    };
    this.tarefas.push(tarefa);
    return tarefa;
  }

  remover(id: number): void {
    this.tarefas = this.tarefas.filter(t => t.id !== id);
  }

  atualizarStatus(id: number, status: TarefaStatus): Tarefa {
    const tarefa = this.getPorId(id);
    tarefa.status = status;
    return tarefa;
  }
}
```

<br/>
<hr />
<br/>

6ï¸âƒ£ Criar o ``TarefasController``

ğŸ“ ``src/tarefas/tarefas.controller.ts``

```ts
import {
  Controller,
  Get,
  Param,
  Post,
  Delete,
  Patch,
  Body,
} from '@nestjs/common';
import { TarefasService } from './tarefas.service';
import { CreateTarefaDto } from './dto/create-tarefa.dto';
import { Tarefa } from './tarefa.model';
import { TarefaStatus } from './enums/tarefa-status.enum';

@Controller('tarefas')
export class TarefasController {
  constructor(private readonly tarefasService: TarefasService) {}

  @Get()
  getTodas(): Tarefa[] {
    return this.tarefasService.getTodas();
  }

  @Get(':id')
  getPorId(@Param('id') id: string): Tarefa {
    return this.tarefasService.getPorId(Number(id));
  }

  @Post()
  criar(@Body() dto: CreateTarefaDto): Tarefa {
    return this.tarefasService.criar(dto);
  }

  @Delete(':id')
  remover(@Param('id') id: string): void {
    this.tarefasService.remover(Number(id));
  }

  @Patch(':id/status')
  atualizarStatus(
    @Param('id') id: string,
    @Body('status') status: TarefaStatus,
  ): Tarefa {
    return this.tarefasService.atualizarStatus(Number(id), status);
  }
}
```

<br/>
<hr />
<br/>

## ğŸ“¦ Estrutura final do projeto (sem banco)

```bash
src/
â”œâ”€â”€ tarefas/
â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â””â”€â”€ create-tarefa.dto.ts
â”‚   â”œâ”€â”€ enums/
â”‚   â”‚   â””â”€â”€ tarefa-status.enum.ts
â”‚   â”œâ”€â”€ tarefa.model.ts
â”‚   â”œâ”€â”€ tarefas.controller.ts
â”‚   â”œâ”€â”€ tarefas.service.ts
â”‚   â””â”€â”€ tarefas.module.ts
â”œâ”€â”€ app.module.ts
â””â”€â”€ main.ts
```

## ğŸ«£ Antes do exercÃ­cio final vamos implementar a rota ``PATCH``

## âœ… Rota ``PATCH /tarefas/:id/status``

Essa rota atualiza o ``status`` de uma tarefa especÃ­fica.

<br/>
<hr />
<br/>

1ï¸âƒ£ Atualizar o ``TarefasService``

Adicione o mÃ©todo ``atualizarStatus()``:

```ts
// tarefas.service.ts
import { TarefaStatus } from './enums/tarefa-status.enum';

atualizarStatus(id: number, novoStatus: TarefaStatus): Tarefa {
  const tarefa = this.getPorId(id);
  tarefa.status = novoStatus;
  return tarefa;
}
```

<br/>
<hr />
<br/>

2ï¸âƒ£ Atualizar o ``TarefasController``

Adicione a rota ``PATCH``:

```ts
// tarefas.controller.ts
import { Patch, Body } from '@nestjs/common';
import { TarefaStatus } from './enums/tarefa-status.enum';

@Patch(':id/status')
atualizarStatus(
  @Param('id') id: string,
  @Body('status') status: TarefaStatus,
): Tarefa {
  return this.tarefasService.atualizarStatus(Number(id), status);
}
```

<br/>
<hr />
<br/>

3ï¸âƒ£ Testar no Postman

RequisiÃ§Ã£o:

```bash
PATCH http://localhost:3000/tarefas/123456789/status
```

Corpo JSON:

```json
{
  "status": "FINALIZADA"
}
```

âœ… Resposta esperada:

```json
{
  "id": 123456789,
  "titulo": "Estudar para a prova",
  "descricao": "Focar nos exercÃ­cios de Nest.js",
  "status": "FINALIZADA"
}
```

<br/>
<hr />
<br/>

## ğŸ§ª ExercÃ­cio Final

1. Testar os endpoints no Postman:

- ``POST /tarefas`` com:

```json
{
  "titulo": "Estudar para a prova",
  "descricao": "Focar nos exercÃ­cios de Nest.js"
}
```

- ``GET /tarefas``

- ``GET /tarefas/:id``

- ``PATCH /tarefas/:id/status`` com:

```json
{ "status": "EM_ANDAMENTO" }
```

- ``DELETE /tarefas/:id``

2. Tentar criar mÃºltiplas tarefas e alternar status.

<br/>
<hr />
<br/>

## âœ… O que vocÃª aprendeu hoje:

âœ” Como juntar tudo que aprendeu na semana em um mini projeto
âœ” Como aplicar DTOs, enums, services e controllers de forma prÃ¡tica
âœ” Como criar uma API REST funcional sem banco de dados
âœ” Como estruturar corretamente as pastas e arquivos do projeto

<br/>
<hr />
<br/>
<p align="center">========== // ==========</p>

<h2 align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio da 2Âª semana e do 8Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</h2>

<p align="center">========== // ==========</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 8 â€“ Pipes e ValidaÃ§Ã£o de Dados

ğŸ“š ConteÃºdo TeÃ³rico

## âœ… O que sÃ£o Pipes no Nest.js?

- Pipes sÃ£o classes responsÃ¡veis por:

  - Transformar dados de entrada (ex: converter tipos)

  - Validar dados antes que cheguem ao controller

- Funcionam junto com os decoradores ``@Body()``, ``@Param()``, ``@Query()``, etc.

> No caso de DTOs, os pipes funcionam junto com bibliotecas como ``class-validator`` e ``class-transformer``.

<br/>
<hr />
<br/>

## âœ… ValidaÃ§Ã£o com ``class-validator`` + ``class-transformer``

- class-validator: fornece decorators como ``@IsString()``, ``@IsNotEmpty()``, ``@IsEnum()``, etc.

- class-transformer: converte os dados de entrada em instÃ¢ncias da classe DTO (necessÃ¡rio para que a validaÃ§Ã£o funcione)

<br/>
<hr />
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

1ï¸âƒ£ Instalar os pacotes

```bash
npm install class-validator class-transformer
```

<br/>
<hr />
<br/>

2ï¸âƒ£ Habilitar o pipe global de validaÃ§Ã£o

No ``main.ts``, adicione o ``ValidationPipe`` global:

```ts
// src/main.ts
import { ValidationPipe } from '@nestjs/common';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  app.useGlobalPipes(new ValidationPipe());
  await app.listen(3000);
}
bootstrap();
```

<br/>
<hr />
<br/>

3ï¸âƒ£ Atualizar o DTO de criaÃ§Ã£o de tarefa

ğŸ“ ``src/tarefas/dto/create-tarefa.dto.ts``

```ts
import { IsNotEmpty } from 'class-validator';

export class CreateTarefaDto {
  @IsNotEmpty({ message: 'O tÃ­tulo nÃ£o pode estar vazio.' })
  titulo: string;

  @IsNotEmpty({ message: 'A descriÃ§Ã£o nÃ£o pode estar vazia.' })
  descricao: string;
}
```

> Agora, se o cliente enviar ``POST /tarefas`` com campos vazios, ele receberÃ¡ uma mensagem de erro automaticamente.

<br/>
<hr />
<br/>

4ï¸âƒ£ Criar o ``FilterTarefasDto`` com validaÃ§Ã£o

ğŸ“ ``src/tarefas/dto/filter-tarefas.dto.ts``

```ts
import { IsOptional, IsEnum, IsString } from 'class-validator';
import { TarefaStatus } from '../enums/tarefa-status.enum';

export class FilterTarefasDto {
  @IsOptional()
  @IsEnum(TarefaStatus, {
    message: 'Status invÃ¡lido. Use ABERTA, EM_ANDAMENTO ou FINALIZADA',
  })
  status?: TarefaStatus;

  @IsOptional()
  @IsString()
  termo?: string;
}
```

> Esse DTO poderÃ¡ ser usado para filtros com query params, como:

```bash
GET /tarefas?status=ABERTA&termo=estudar
```

<br/>
<hr />
<br/>

5ï¸âƒ£ Atualizar o controller (para preparar uso do filtro)

ğŸ“ ``src/tarefas/tarefas.controller.ts``

```ts
import { Query } from '@nestjs/common';
import { FilterTarefasDto } from './dto/filter-tarefas.dto';

@Get()
getTarefas(@Query() filtroDto: FilterTarefasDto): Tarefa[] {
  if (Object.keys(filtroDto).length) {
    return this.tarefasService.filtrarTarefas(filtroDto);
  }
  return this.tarefasService.getTodasTarefas();
}
```

(Opcional) MÃ©todo no service:

```ts
filtrarTarefas(filtroDto: FilterTarefasDto): Tarefa[] {
  const { status, termo } = filtroDto;
  let tarefasFiltradas = this.tarefas;

  if (status) {
    tarefasFiltradas = tarefasFiltradas.filter(t => t.status === status);
  }

  if (termo) {
    tarefasFiltradas = tarefasFiltradas.filter(
      t => t.titulo.includes(termo) || t.descricao.includes(termo),
    );
  }

  return tarefasFiltradas;
}
```

<br/>
<hr />
<br/>

<h2>âš ï¸ Se for usar a funÃ§Ã£o acima no mÃ©todo service seria bom remover os dois metodos abaixo relacionados ao status no serviÃ§o `TarefasService`</h2>

```ts
getTarefasPorStatus(status: string): Tarefa[]
filtrarTarefasPorStatus(status: string): Tarefa[]
```

<h2>âš ï¸ TambÃ©m remova o mÃ©todo  ``@Get('status/:status')`` e deixe tudo com o metodo que modificamos `@Get()`</h2>

```ts
// GET /tarefas/status/:status
  @Get('status/:status')
  getTarefasPorStatus(@Param('status') status: string): Tarefa[] {
    return this.tarefasService.filtrarTarefasPor status(status);
  }
```

<br/>
<hr />
<br/>

## ğŸ§ª ExercÃ­cio Final

1. Testar ``POST /tarefas`` com campos vazios:

```json
{
  "titulo": "",
  "descricao": ""
}
```

âœ”ï¸ Esperado: erro 400 com mensagens personalizadas.

2. Testar ``GET /tarefas?status=INVALIDO``

âœ”ï¸ Esperado: erro 400 com mensagem de status invÃ¡lido.

3. Testar ``GET /tarefas?status=EM_ANDAMENTO&termo=prova``

âœ”ï¸ Esperado: retorno filtrado por status e termo no tÃ­tulo/descriÃ§Ã£o.

<br/>
<hr />
<br/>

## âœ… O que vocÃª aprendeu hoje:

âœ” O que sÃ£o e para que servem pipes no Nest.js
âœ” Como validar dados com ``class-validator`` e ``class-transformer``
âœ” Como criar DTOs com validaÃ§Ã£o automÃ¡tica
âœ” Como usar ``@Query()`` com validaÃ§Ã£o para filtros avanÃ§ados
âœ” Como aplicar boas mensagens de erro para entrada de dados invÃ¡lidos

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 9Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 9 â€“ Pipes Customizados

<br/>
<hr />
<br/>

## ğŸ“š ConteÃºdo TeÃ³rico

### âœ… O que sÃ£o Pipes Customizados?

Pipes customizados sÃ£o classes que vocÃª cria para realizar **validaÃ§Ã£o ou transformaÃ§Ã£o personalizada** dos dados antes que eles sejam processados por controllers.

Eles sÃ£o muito Ãºteis para:
- Validar enums (como status)
- Transformar strings em tipos especÃ­ficos
- Aplicar regras de negÃ³cio em parÃ¢metros de rota, query ou body

<br/>
<hr />
<br/>

## ğŸ¯ Objetivo do Dia

Criar um **pipe de validaÃ§Ã£o de status de tarefa** que:
- Aceita apenas valores vÃ¡lidos definidos no enum `TarefaStatus`
- Rejeita valores invÃ¡lidos com uma exceÃ§Ã£o amigÃ¡vel (`BadRequestException`)

<br/>
<hr />
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

### 1ï¸âƒ£ Criar o arquivo do Pipe

ğŸ“„ `src/tarefas/pipes/tarefa-status-validation.pipe.ts`

```ts
import { PipeTransform, BadRequestException } from '@nestjs/common';
import { TarefaStatus } from '../enums/tarefa-status.enum';

export class TarefaStatusValidationPipe implements PipeTransform {
  readonly statusPermitidos = [
    TarefaStatus.ABERTA,
    TarefaStatus.EM_ANDAMENTO,
    TarefaStatus.FINALIZADA,
  ];

  transform(value: any) {
    value = value.toUpperCase();

    if (!this.statusValido(value)) {
      throw new BadRequestException(`Status invÃ¡lido: ${value}`);
    }

    return value;
  }

  private statusValido(status: any) {
    return this.statusPermitidos.includes(status);
  }
}
```

<br/>
<hr />
<br/>

### 2ï¸âƒ£ Usar o Pipe no controller

ğŸ“„ `tarefas.controller.ts`

```ts
import { TarefaStatusValidationPipe } from './pipes/tarefa-status-validation.pipe';

@Patch(':id/status')
atualizarStatus(
  @Param('id') id: string,
  @Body('status', TarefaStatusValidationPipe) status: TarefaStatus,
): Tarefa {
  return this.tarefasService.atualizarStatus(Number(id), status);
}
```

<br/>
<hr />
<br/>

### 3ï¸âƒ£ Testar com Postman

**Rota:**

```
PATCH /tarefas/123456789/status
```

**Corpo vÃ¡lido:**

```json
{
  "status": "EM_ANDAMENTO"
}
```

**Corpo invÃ¡lido:**

```json
{
  "status": "concluida"
}
```

ğŸ”´ Esperado: retorno 400 com mensagem:

```
{
  "statusCode": 400,
  "message": "Status invÃ¡lido: CONCLUIDA",
  "error": "Bad Request"
}
```

<br/>
<hr />
<br/>

## âœ… O que vocÃª aprendeu hoje:

âœ” Como criar pipes customizados  
âœ” Como usar pipe para validar parÃ¢metros (`@Body`, `@Param`)  
âœ” Como evitar cÃ³digos duplicados de validaÃ§Ã£o  
âœ” Como lanÃ§ar exceÃ§Ãµes personalizadas usando `BadRequestException`

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 10Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 10 â€“ Exception Filters (Tratamento de Erros)

<br/>
<hr />
<br/>

## ğŸ“š ConteÃºdo TeÃ³rico

### âœ… O que sÃ£o Exception Filters no Nest.js?

Exception Filters sÃ£o mecanismos do Nest.js para **tratar erros de forma centralizada e elegante**.

VocÃª pode:
- Usar exceÃ§Ãµes prÃ©-definidas como `NotFoundException`, `BadRequestException`, etc.
- Criar filtros globais customizados para lidar com erros de forma padronizada.

<br/>
<hr />
<br/>

### âœ… ExceÃ§Ãµes mais comuns no Nest.js

| Classe de Erro         | CÃ³digo HTTP | Quando usar                            |
|------------------------|-------------|----------------------------------------|
| `NotFoundException`    | 404         | Quando algo nÃ£o Ã© encontrado           |
| `BadRequestException`  | 400         | Dados invÃ¡lidos enviados pelo cliente  |
| `UnauthorizedException`| 401         | Acesso nÃ£o autorizado                  |
| `ForbiddenException`   | 403         | Acesso proibido                        |

<br/>
<hr />
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

### 1ï¸âƒ£ Atualizar mÃ©todo `getTarefaPorId` com exceÃ§Ã£o personalizada

ğŸ“„ `tarefas.service.ts`

Substitua:
```ts
if (!tarefa) {
  throw new Error(\`Tarefa com id \${id} nÃ£o encontrada.\`);
}
```

Por:
```ts
import { NotFoundException } from '@nestjs/common';

if (!tarefa) {
  throw new NotFoundException(\`Tarefa com ID "\${id}" nÃ£o encontrada\`);
}
```

<br/>
<hr />
<br/>

### 2ï¸âƒ£ Repetir para `deleteTarefa` (caso exista)

Exemplo:
```ts
deleteTarefa(id: number): void {
  const tarefa = this.getTarefaPorId(id);
  this.tarefas = this.tarefas.filter(t => t.id !== tarefa.id);
}
```

Se o `getTarefaPorId` jÃ¡ lanÃ§a exceÃ§Ã£o, o mÃ©todo `deleteTarefa()` herdarÃ¡ esse comportamento.

<br/>
<hr />
<br/>

### 3ï¸âƒ£ Repetir para `atualizarStatus`

ğŸ“„ `tarefas.service.ts`

```ts
atualizarStatus(id: number, novoStatus: TarefaStatus): Tarefa {
  const tarefa = this.getTarefaPorId(id); // jÃ¡ valida
  tarefa.status = novoStatus;
  return tarefa;
}
```

<br/>
<hr />
<br/>

## ğŸ§ª ExercÃ­cio Final

1. âœ… Garantir que `GET /tarefas/:id` lanÃ§a `404` se a tarefa nÃ£o existir
2. âœ… Garantir que `DELETE /tarefas/:id` lanÃ§a `404` se nÃ£o for encontrada
3. âœ… Garantir que `PATCH /tarefas/:id/status` lanÃ§a `404` se o ID for invÃ¡lido

<br/>
<hr />
<br/>

## âœ… O que vocÃª aprendeu hoje:

âœ” Como lanÃ§ar exceÃ§Ãµes com `NotFoundException`  
âœ” Como substituir `throw new Error(...)` por exceÃ§Ãµes do Nest.js  
âœ” Como garantir respostas HTTP padronizadas em caso de erro  
âœ” Como melhorar a clareza e seguranÃ§a da sua API com tratamento de erros

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 11Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 11 â€“ Middleware

<br/>
<hr />
<br/>

## ğŸ“š ConteÃºdo TeÃ³rico

### âœ… O que Ã© Middleware no Nest.js?

Middlewares sÃ£o funÃ§Ãµes executadas **antes que o request chegue ao controller**. Eles sÃ£o Ãºteis para:

- Registrar logs
- Verificar autenticaÃ§Ã£o
- Manipular/transformar dados do request

<br/>
<hr />
<br/>

### ğŸ” DiferenÃ§as entre Middleware, Guards e Interceptors

| Conceito     | Executa em...       | Finalidade principal                   |
|--------------|---------------------|----------------------------------------|
| Middleware   | Antes do controller | PrÃ©-processamento, logging             |
| Guard        | Antes do controller | Controle de acesso (autorizaÃ§Ã£o)       |
| Interceptor  | Antes e depois      | Modificar request/response, mÃ©tricas   |

<br/>
<hr />
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

### 1ï¸âƒ£ Gerar middleware

```bash
nest g middleware logger
```

Cria o arquivo: `src/logger.middleware.ts`

<br/>
<hr />
<br/>

### 2ï¸âƒ£ Implementar o middleware de log

ğŸ“„ `logger.middleware.ts`

```ts
import { Injectable, NestMiddleware } from '@nestjs/common';
import { Request, Response, NextFunction } from 'express';

@Injectable()
export class LoggerMiddleware implements NestMiddleware {
  use(req: Request, res: Response, next: NextFunction) {
    const { method, originalUrl } = req;
    const timestamp = new Date().toISOString();
    console.log(`[${timestamp}] ${method} ${originalUrl}`);
    next(); // passa para o prÃ³ximo middleware ou controller
  }
}
```

<br/>
<hr />
<br/>

### 3ï¸âƒ£ Aplicar o middleware nas rotas de tarefas

ğŸ“„ `app.module.ts`

Importe o mÃ³dulo:

```ts
import { MiddlewareConsumer, Module, NestModule } from '@nestjs/common';
import { TarefasModule } from './tarefas/tarefas.module';
import { LoggerMiddleware } from './logger.middleware';

@Module({
  imports: [TarefasModule],
})
export class AppModule implements NestModule {
  configure(consumer: MiddlewareConsumer) {
    consumer
      .apply(LoggerMiddleware)
      .forRoutes('tarefas'); // aplica somente Ã s rotas de /tarefas
  }
}
```

<br/>
<hr />
<br/>

## ğŸ§ª ExercÃ­cio

âœ” Adicione um log personalizado com:

- Timestamp (`new Date().toISOString()`)
- MÃ©todo HTTP (`GET`, `POST`, etc.)
- URL acessada (`originalUrl`)

<br/>
<hr />
<br/>

## âœ… O que vocÃª aprendeu hoje:

âœ” O que sÃ£o e para que servem os middlewares  
âœ” Como criar middlewares com o Nest CLI  
âœ” Como aplicar middlewares globalmente ou em rotas especÃ­ficas  
âœ” Como registrar logs com timestamp e rota acessada

<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 12Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>

# ğŸ“˜ Dia 12 â€“ Guards (AutenticaÃ§Ã£o BÃ¡sica)

<br/>
<hr />
<br/>

## ğŸ“š ConteÃºdo TeÃ³rico

### âœ… O que sÃ£o Guards no Nest.js?

Guards sÃ£o mecanismos de seguranÃ§a que **controlam se uma requisiÃ§Ã£o pode continuar** atÃ© o controller ou nÃ£o.

Eles sÃ£o muito usados para:
- Verificar autenticaÃ§Ã£o (JWT, tokens, etc)
- Checar permissÃµes (roles)
- Restringir acesso por lÃ³gica personalizada

<br/>
<hr />
<br/>

## ğŸ§± Estrutura bÃ¡sica de um Guard

```ts
import { CanActivate, ExecutionContext, Injectable } from '@nestjs/common';

@Injectable()
export class MeuGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    // lÃ³gica de permissÃ£o
    return true;
  }
}
```

<br/>
<hr />
<br/>

## ğŸ”§ Atividades PrÃ¡ticas

### 1ï¸âƒ£ Criar um Guard chamado `AuthGuard`

```bash
nest g guard auth
```

<br/>
<hr />
<br/>

### 2ï¸âƒ£ Implementar o guard de autenticaÃ§Ã£o simples

ğŸ“„ `auth.guard.ts`

```ts
import {
  CanActivate,
  ExecutionContext,
  Injectable,
  UnauthorizedException,
} from '@nestjs/common';
import { Request } from 'express';

@Injectable()
export class AuthGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request: Request = context.switchToHttp().getRequest();
    const authHeader = request.headers['authorization'];

    if (authHeader === 'meutoken123') {
      return true;
    }

    throw new UnauthorizedException('Token invÃ¡lido ou ausente');
  }
}
```

<br/>
<hr />
<br/>

### 3ï¸âƒ£ Usar o guard na rota protegida

ğŸ“„ `tarefas.controller.ts`

```ts
import { UseGuards } from '@nestjs/common';
import { AuthGuard } from '../auth.guard'; // ou o caminho correspondente

@Post()
@UseGuards(AuthGuard)
createTarefa(@Body() createTarefaDto: CreateTarefaDto): Tarefa {
  return this.tarefasService.createTarefa(createTarefaDto);
}
```

<br/>
<hr />
<br/>

## ğŸ§ª ExercÃ­cio

âœ” Aplique o guard apenas no mÃ©todo `POST /tarefas`  
âœ” Teste com o Postman ou Insomnia:

- Enviar sem header `authorization`: âŒ recebe erro 401
- Enviar com `authorization: meutoken123`: âœ… tarefa criada com sucesso

<br/>
<hr />
<br/>

## âœ… O que vocÃª aprendeu hoje:

âœ” Como criar guards no Nest.js  
âœ” Como interceptar requisiÃ§Ãµes antes do controller  
âœ” Como fazer uma autenticaÃ§Ã£o simples com token hardcoded  
âœ” Como proteger rotas usando `@UseGuards()`













<br/>
<hr />
<br/>
<p align="center">============================== // ==============================</p>

<p align="center">ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ InÃ­cio do 6Âº dia de aula ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</p>

<p align="center">============================== // ==============================</p>
<br/>
<hr />
<br/>


1ï¸âƒ£ 2ï¸âƒ£ 3ï¸âƒ£ 4ï¸âƒ£ 5ï¸âƒ£ 6ï¸âƒ£ 7ï¸âƒ£ 8ï¸âƒ£ 9ï¸âƒ£ ğŸ”Ÿ
